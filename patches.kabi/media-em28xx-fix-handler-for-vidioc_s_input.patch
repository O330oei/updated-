From: Simon Schricker <sschricker@suse.de>
Date: Tue, 24 Sep 2019 14:35:39 +0200
Subject: [PATCH] media: em28xx: fix handler for vidioc_s_input()
Patch-mainline: never, kabi
References: bsc#1051510

Signed-off-by: Simon Schricker <sschricker@suse.de>
---
 drivers/media/usb/em28xx/em28xx.h |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

--- a/drivers/media/usb/em28xx/em28xx.h
+++ b/drivers/media/usb/em28xx/em28xx.h
@@ -330,9 +330,14 @@ enum em28xx_usb_audio_type {
    address more than two different entries.
  */
 enum em28xx_amux {
+#ifndef __GENKSYMS__
 	EM28XX_AMUX_UNUSED = -1,
 	/* This is the only entry for em28xx tuner input */
 	EM28XX_AMUX_VIDEO = 0,	/* em28xx tuner, AC97 mixer Video */
+#else
+	/* This is the only entry for em28xx tuner input */
+	EM28XX_AMUX_VIDEO,	/* em28xx tuner, AC97 mixer Video */
+#endif
 
 	EM28XX_AMUX_LINE_IN,	/* AC97 mixer Line In */
 
@@ -651,8 +656,6 @@ struct em28xx {
 	unsigned int ctl_input;	/* selected input */
 	unsigned int ctl_ainput;/* selected audio input */
 	unsigned int ctl_aoutput;/* selected audio output */
-	enum em28xx_amux amux_map[MAX_EM28XX_INPUT];
-
 	int mute;
 	int volume;
 
@@ -732,6 +735,7 @@ struct em28xx {
 #ifndef __GENKSYMS__
 	unsigned int is_webcam:1;
 	unsigned int has_msp34xx:1;
+	enum em28xx_amux amux_map[MAX_EM28XX_INPUT];
 #endif
 };
 
