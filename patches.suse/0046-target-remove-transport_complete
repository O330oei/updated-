From: Mike Christie <mchristi@redhat.com>
Date: Wed, 31 May 2017 15:52:42 -0500
Subject: target: remove transport_complete
Git-commit: 1a444175486026c1a280507f8d82094909acddd2
Patch-mainline: v4.13-rc1
References: fate#323946

transport_complete is no longer used, so drop the code.

Signed-off-by: Mike Christie <mchristi@redhat.com>
Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
Acked-by: Lee Duncan <lduncan@suse.com>
---
 drivers/target/target_core_transport.c | 6 ------
 include/target/target_core_backend.h   | 4 ----
 2 files changed, 10 deletions(-)

diff --git a/drivers/target/target_core_transport.c b/drivers/target/target_core_transport.c
index 341025a3cbb7..b9122a56784e 100644
--- a/drivers/target/target_core_transport.c
+++ b/drivers/target/target_core_transport.c
@@ -732,12 +732,6 @@ void target_complete_cmd(struct se_cmd *cmd, u8 scsi_status)
 
 
 	spin_lock_irqsave(&cmd->t_state_lock, flags);
-
-	if (dev && dev->transport->transport_complete) {
-		dev->transport->transport_complete(cmd,
-				cmd->t_data_sg,
-				transport_get_sense_buffer(cmd));
-	}
 	if (cmd->se_cmd_flags & SCF_TRANSPORT_TASK_SENSE)
 		success = 1;
 
diff --git a/include/target/target_core_backend.h b/include/target/target_core_backend.h
index 3757f5f54e03..e150e391878b 100644
--- a/include/target/target_core_backend.h
+++ b/include/target/target_core_backend.h
@@ -37,10 +37,6 @@ struct target_backend_ops {
 					   const char *, ssize_t);
 	ssize_t (*show_configfs_dev_params)(struct se_device *, char *);
 
-	void (*transport_complete)(struct se_cmd *cmd,
-				   struct scatterlist *,
-				   unsigned char *);
-
 	sense_reason_t (*parse_cdb)(struct se_cmd *cmd);
 	u32 (*get_device_type)(struct se_device *);
 	sector_t (*get_blocks)(struct se_device *);

