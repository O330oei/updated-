From: "David S. Miller" <davem@davemloft.net>
Date: Mon, 3 Jul 2017 07:04:22 -0700
Subject: net: Remove references to NETIF_F_UFO in netdev_fix_features().
Patch-mainline: v4.14-rc1
Git-commit: d4c023f4f3dd96734ef53d4b588136a872300046
References: bsc#1061739

It is going away.

Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: Michal Kubecek <mkubecek@suse.cz>

---
 net/core/dev.c | 18 ------------------
 1 file changed, 18 deletions(-)

diff --git a/net/core/dev.c b/net/core/dev.c
index 8f70fccf8c43..a87ad6bc8bce 100644
--- a/net/core/dev.c
+++ b/net/core/dev.c
@@ -7235,24 +7235,6 @@ static netdev_features_t netdev_fix_features(struct net_device *dev,
 		features &= ~NETIF_F_GSO;
 	}
 
-	/* UFO needs SG and checksumming */
-	if (features & NETIF_F_UFO) {
-		/* maybe split UFO into V4 and V6? */
-		if (!(features & NETIF_F_HW_CSUM) &&
-		    ((features & (NETIF_F_IP_CSUM | NETIF_F_IPV6_CSUM)) !=
-		     (NETIF_F_IP_CSUM | NETIF_F_IPV6_CSUM))) {
-			netdev_dbg(dev,
-				"Dropping NETIF_F_UFO since no checksum offload features.\n");
-			features &= ~NETIF_F_UFO;
-		}
-
-		if (!(features & NETIF_F_SG)) {
-			netdev_dbg(dev,
-				"Dropping NETIF_F_UFO since no NETIF_F_SG feature.\n");
-			features &= ~NETIF_F_UFO;
-		}
-	}
-
 	/* GSO partial features require GSO partial be set */
 	if ((features & dev->gso_partial_features) &&
 	    !(features & NETIF_F_GSO_PARTIAL)) {
-- 
2.14.2

