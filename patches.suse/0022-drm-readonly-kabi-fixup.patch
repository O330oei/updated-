From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for drm_vma_offset_node readonly field addition
References: CVE-2019-0154,bsc#1135966,CVE-2019-0155,bsc#1135967
Patch-mainline: Never, kABI fixup

[ FIXME: this workaround needs verification ]

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 include/drm/drm_vma_manager.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/include/drm/drm_vma_manager.h
+++ b/include/drm/drm_vma_manager.h
@@ -41,7 +41,9 @@ struct drm_vma_offset_node {
 	rwlock_t vm_lock;
 	struct drm_mm_node vm_node;
 	struct rb_root vm_files;
+#ifndef __GENKSYMS__
 	bool readonly:1;
+#endif
 };
 
 struct drm_vma_offset_manager {
